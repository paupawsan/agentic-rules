# 🔧 Agentic Rules Framework - システムの説明 (日本語)

## システムの仕組み

このドキュメントでは、Agentic Rules Frameworkの仕組み、基本原則、実装の詳細を説明します。

## 🏗️ 基本構造

### フレームワークの基本考え方

Agentic Rules Frameworkは3つの基本原則に基づいて作られています：

#### 1. **分散型ルールシステム**
- **中央制御なし**: 各ルールが自分の担当領域で独立して動作
- **柔軟なつながり**: ルール同士は共有データで通信し、直接呼び出しではない
- **障害の隔離**: 1つのルールに問題が起きても他の部分に影響しない
- **モジュール式**: 新しいルールを追加しても既存のものを変える必要がない

#### 2. **賢い行動ガイドライン**
- **厳しい制限ではない**: ルールは厳しい制限ではなく、行動の指針を提供
- **ツールを選ばない**: AIは使えるツールを使ってルールに従う
- **柔軟な実装**: ルールに従う方法が複数ある
- **段階的な強化**: ルールは既存の機能を少しずつ良くする

#### 3. **独立して動作**
- **外部ソフト不要**: フレームワークは追加インストールなしで動作
- **オフラインOK**: すべての部品が1つのHTMLファイルに含まれる
- **持ち運びやすい設定**: 簡単な導入のためのJSONベース設定
- **複数プラットフォーム対応**: 異なるAI環境に適応可能

### 部品の構成

```
フレームワーク層
├── 初期設定 (bootstrap.json)
├── Webインターフェース (setup.html)
├── コマンドラインツール (setup.py, setup-launcher.py)
└── 多言語システム (localization.json)

ルール層
├── メモリールール (memory-rules/)
├── RAGルール (rag-rules/)
└── 批判的思考ルール (critical-thinking-rules/)

実装層
├── ルールテンプレート (RULES.md.*)
├── 設定の構造 (settings.json)
├── セットアップ情報 (setup.json)
└── 生成された統合ファイル (AGENTS.md)
```

## 🔄 フレームワークの動作フロー

### 1. 初期設定フェーズ
```
bootstrap.jsonを読み込み → 設定を確認 → ルールの読み込み順序を準備
```

**主な作業:**
- 設定の確認と一貫性チェック
- ルールの依存関係を整理して優先順位付け
- 各プラットフォーム向けの調整を準備
- セキュリティと権限のセットアップ

### 2. ルール準備フェーズ
```
有効にした各ルール → 設定を読み込み → 設定を確認 → 動作ルールを準備
```

**各ルールごとの処理:**
- `settings.json`からルール固有の設定を読み込み
- 設定が正しい構造か確認
- データ構造と一時保存領域を準備
- 他のルールとのつながりを確立

### 3. 通常動作フェーズ
```
ユーザーとのやり取り → ルールを実行 → 結果を調整 → 回答を作成
```

**連携して動作:**
- ルールがそれぞれの担当領域で同時に動作
- 結果は初期設定を通じてまとめられる
- ルール間の整合性を確認
- 回答を最適化して最終決定

## 📋 技術仕様

### 初期設定の構造

```json
{
  "_info": {
    "version": "0.1.0",
    "compatibility": ["cursor", "vscode", "custom"],
    "license": "MIT"
  },
  "loading_sequence": [
    "memory-rules",
    "rag-rules",
    "critical-thinking-rules"
  ],
  "hubungan_antar_aturan": {
    "memory_rag_sharing": true,
    "critical_memory_learning": true,
    "rag_critical_validation": true
  },
  "penyesuaian_platform": {
    "cursor": { /* Cursor固有設定 */ },
    "vscode": { /* VSCode固有設定 */ }
  }
}
```

### ルール設定スキーマ

```json
{
  "_metadata": {
    "rule_name": "memory-rules",
    "version": "0.1.0",
    "compatibility": ["cursor", "vscode"],
    "dependencies": ["rag-rules"]
  },
  "mandatory_config": [
    {
      "name": "storage_path",
      "type": "path",
      "validation": "writable_directory"
    }
  ],
  "optional_config": [
    {
      "name": "retention_days",
      "type": "number",
      "default": 90,
      "range": [30, 365]
    }
  ]
}
```

### 生成統合フォーマット

```
# ルールタイトル

**⚠️ 安全対策**: テンプレート有効化が必要

**必須**: 実装要件

## アルゴリズム仕様

### アルゴリズム: Process_Name
**必須**: 実行条件

**ステップ**:
1. ステップバイステップ実装
2. 検証要件
3. エラーハンドリング手順

**設定準拠**: 設定統合
```

## 🔗 ルール同士の連携

### メモリ ↔ RAG連携

**情報流れ:**
```
ユーザー質問 → RAGで文脈検索 → メモリで個人化 → 強化された文脈 → 回答作成
```

**共有するもの:**
- 文脈の理解と関連性のスコア
- メモリからのユーザーの好みパターン
- 過去の成功に基づく検索方法の改善

### 批判的思考 ↔ メモリ連携

**改善サイクル:**
```
回答作成 → 批判的に分析 → エラー発見 → メモリに保存 → 将来の改善
```

**品質確保:**
- 保存された情報の正確性確認
- 修正学習とパターン認識
- 過去の実績に基づく信頼度調整

### RAG ↔ 批判的思考連携

**検証プロセス:**
```
情報検索 → 批判的に確認 → 出典検証 → 信頼度評価 → 回答の資格
```

**品質チェック:**
- 出典の信頼性評価
- 論理的一貫性検証
- 仮定のテストと検証

## 🌍 複数プラットフォーム対応

### プラットフォーム調整システム

```json
{
  "platform_adapters": {
    "cursor": {
      "file_system": "cursor_workspace",
      "tool_integration": "cursor_tools",
      "memory_persistence": "cursor_storage"
    },
    "vscode": {
      "file_system": "workspace_folders",
      "tool_integration": "vscode_extensions",
      "memory_persistence": "workspace_settings"
    },
    "custom": {
      "file_system": "configurable_paths",
      "tool_integration": "api_endpoints",
      "memory_persistence": "custom_storage"
    }
  }
}
```

### 環境認識

**自動プラットフォーム検出:**
- ファイルシステムの構造を分析
- 利用可能なツールを検出
- 設定ファイルの存在を確認
- 実行時の環境変数をチェック

## 🔒 セキュリティと安全システム

### 安全対策

#### テンプレート有効化の安全
- **自動読み込みなし**: ルールはユーザーが明確に有効化する必要がある
- **テンプレート印**: 誤って有効化しないための明確な目印
- **ユーザー同意**: ルール有効化に明確な確認が必要

#### ランタイム安全
- **エラー隔離**: ルール障害がシステム動作から隔離
- **リソース制限**: 設定可能なタイムアウトとリソース制約
- **監査ログ**: すべてのルール操作がログに記録

### データ保護

#### メモリセキュリティ
- **暗号化オプション**: 機密データを暗号化可能
- **アクセス制御**: メモリカテゴリごとに異なる権限レベル
- **保持ポリシー**: 期限切れデータの自動クリーンアップ

#### 設定セキュリティ
- **検証**: すべての設定がスキーマに対して検証
- **サニタイズ**: 入力検証とサニタイズ
- **バックアップ**: 設定変更前の自動バックアップ

## 📊 パフォーマンスアーキテクチャ

### 最適化戦略

#### メモリ管理
- **遅延読み込み**: コンポーネントをオンデマンドで読み込み
- **キャッシュレイヤー**: パフォーマンスのためのマルチレベルキャッシュ
- **圧縮**: 大規模データセットの自動圧縮
- **インデックス化**: 高速検索のための最適化インデックス

#### 処理最適化
- **並行実行**: 可能な場合にルールを並行実行
- **バッチ処理**: 効率のためのグループ操作
- **段階的読み込み**: 重要なコンポーネントを最初に読み込み
- **バックグラウンドタスク**: 非ブロックバックグラウンド操作

### スケーラビリティ考慮事項

#### リソーススケーリング
- **メモリ制限**: 設定可能なメモリ使用制限
- **処理タイムアウト**: 設定可能な操作タイムアウト
- **ストレージクォータ**: 設定可能なストレージサイズ制限
- **同時操作**: 同時操作の制限

## 🔧 開発と拡張

### 新しいルールの追加

**ステップバイステッププロセス:**

1. **ディレクトリ作成**: `mkdir new-rule-rules/`
2. **テンプレート開発**: アルゴリズム付きの`RULES.md.en`を作成
3. **設定スキーマ**: `settings.json`と`setup.json`を定義
4. **ローカライズ**: `localization.json`に文字列を追加
5. **Bootstrap統合**: `bootstrap.json`の読み込みシーケンスに追加
6. **Webインターフェース**: `generate_simple_setup.py`を実行してUIを更新
7. **テスト**: すべてのサポートプラットフォームで検証

### ルール開発ガイドライン

#### アルゴリズム設計
- **明確な目標**: 各アルゴリズムが具体的で測定可能な目標を持つ
- **実装柔軟性**: 複数の実装アプローチを許可
- **エラーハンドリング**: 包括的なエラー検出と回復
- **パフォーマンス意識**: 効率的なリソース使用の考慮

#### 設定設計
- **段階的開示**: シンプルなデフォルトと高度なオプション
- **検証**: 包括的な入力検証とエラーメッセージ
- **ドキュメント**: 各設定オプションの明確な説明
- **互換性**: 既存設定との後方互換性

### 品質保証

#### テスト要件
- **ユニットテスト**: 個別アルゴリズムテスト
- **統合テスト**: ルール間インタラクションテスト
- **プラットフォームテスト**: すべてのサポートプラットフォームでのテスト
- **パフォーマンステスト**: 負荷とパフォーマンス検証

#### 検証チェック
- **スキーマ準拠**: すべての設定が定義されたスキーマに一致
- **ローカライズカバレッジ**: すべてのユーザー向け文字列がローカライズ
- **ドキュメント完全性**: すべての機能がドキュメント化
- **互換性**: 既存統合に対する破壊的変更なし

## 📈 進化と保守

### バージョン互換性

**セマンティックバージョニング:**
- **MAJOR**: ルールインターフェースまたはbootstrapフォーマットの破壊的変更
- **MINOR**: 新機能とルール追加
- **PATCH**: バグ修正とパフォーマンス改善

### 後方互換性

**移行戦略:**
- **設定移行**: ユーザー設定の自動移行
- **ルール互換性**: 新しいルールが既存統合を破壊しない
- **プラットフォームサポート**: プラットフォームバージョン間での互換性維持

### 非推奨ポリシー

**優雅な移行:**
- **警告期間**: 非推奨機能が警告を発行
- **移行ツール**: 自動移行支援
- **サポートタイムライン**: 非推奨機能の最小6ヶ月のサポート

## 🔬 研究とイノベーション

### 現在の研究領域

#### 高度なメモリシステム
- **セマンティックメモリ**: 理解ベースの保存と検索
- **エピソードメモリ**: 時間的関係を持つイベントベースメモリ
- **手続きメモリ**: プロセスとワークフローメモリ
- **感情メモリ**: ユーザー感情とプリファレンス学習

#### 強化推論
- **因果推論**: 原因と結果の関係の理解
- **類似推論**: パターン認識と適用
- **仮説推論**: 仮説生成とテスト
- **メタ推論**: 推論プロセスについての推論

#### コンテキスト最適化
- **動的コンテキストウィンドウ**: 適応コンテキストサイジング
- **マルチモーダル統合**: テキスト、コード、視覚コンテキスト
- **リアルタイム適応**: 会話中のコンテキスト調整
- **パーソナライズ**: ユーザー固有のコンテキスト最適化

### 将来の方向性

#### 自律学習
- **自己改善**: 自分自身を学習・最適化するルール
- **ユーザー適応**: インタラクションパターンに基づく深いパーソナライズ
- **クロスセッションレーニング**: すべてのユーザーインタラクションにわたる知識蓄積

#### 高度統合
- **マルチエージェント調整**: エージェント協力を 위한ルール
- **外部API統合**: サードパーティサービス統合のためのルール
- **リアルタイム協働**: マルチユーザー環境のためのルール

---

## 📚 追加リソース

- **[../README.md](../README.md)** - クイックスタートと概要
- **[../CORE-RULES.md](../CORE-RULES.md)** - フレームワーク原則
- **[USER-GUIDE.md](USER-GUIDE.md)** - エンドユーザーセットアップガイド
- **[DEVELOPER-GUIDE.md](DEVELOPER-GUIDE.md)** - 技術実装ガイド
- **[EXTENSION-MANUAL.md](EXTENSION-MANUAL.md)** - フレームワーク拡張ガイド

---

**🔧 システム概要**: Agentic Rules Frameworkの包括的な技術アーキテクチャと設計原則。

*Copyright (c) 2025 Paulus Ery Wasito Adhi. MIT Licenseの下でライセンスされています。*